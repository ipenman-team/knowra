PORT=3001
TENANT_ID=t1

# docker-compose 默认端口映射 54321 -> 5432
DATABASE_URL=postgresql://contexta:contexta@localhost:54321/contexta?schema=public

# Web (Next.js) -> API (NestJS)
# 浏览器端使用 NEXT_PUBLIC_API_BASE_URL；Next.js 服务端（route handlers）建议用 API_BASE_URL
NEXT_PUBLIC_API_BASE_URL=http://localhost:3001
API_BASE_URL=http://localhost:3001

# internal service RPC token (apps/contexta-ai -> apps/api)
INTERNAL_SERVICE_TOKEN=change_me_internal_service_token

# Web (Next.js) -> contexta-ai service (NestJS)
# 浏览器端使用 NEXT_PUBLIC_CONTEXTA_AI_BASE_URL；默认 http://localhost:3002
NEXT_PUBLIC_CONTEXTA_AI_BASE_URL=http://localhost:3002
CONTEXTA_AI_BASE_URL=http://localhost:3002

# SMTP（用于发送邮箱验证码）
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=

# RAG / LLM (Volcengine Ark, OpenAI-compatible)
VOLCENGINE_API_KEY=
VOLC_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
VOLC_CHAT_MODEL=
VOLC_EMBED_MODEL=

# contexta-ai prompt config
# - CONTEXTA_AI_SYSTEM_PROMPT: 可选；支持用 \n 表示换行
# - CONTEXTA_AI_CONTEXT_WINDOW_SIZE: 可选；上下文最近消息条数（默认 50）
CONTEXTA_AI_SYSTEM_PROMPT=
CONTEXTA_AI_CONTEXT_WINDOW_SIZE=50

# RAG config
# Volcengine Ark embedding（部分模型为 2560 维；需与数据库 rag_chunks.embedding 的 vector(n) 保持一致）
RAG_VECTOR_DIM=2560
RAG_TOP_K=8
RAG_SIMILARITY_THRESHOLD=0.35
RAG_CHUNK_SIZE=800
RAG_CHUNK_OVERLAP=120

# contexta-ai attachments
CONTEXTA_AI_ATTACHMENT_MAX_FILE_SIZE_BYTES=10485760
CONTEXTA_AI_ATTACHMENT_MAX_FILES=5
RAG_ATTACHMENT_TOP_K=8
RAG_ATTACHMENT_SIMILARITY_THRESHOLD=0.35
